@{
    Layout = "~/Views/Shared/_SellerLayout.cshtml";
}

<link rel="stylesheet" href="~/css/chat.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

<input type="hidden" id="sellerId" value="@User.Identity.Name" />

<div class="chat-container">
    <!-- Sidebar - Danh sách khách hàng -->
    <div class="chat-sidebar">
        <div class="sidebar-header">
            <h5>💬 Tin nhắn khách hàng</h5>

            <div class="search-wrapper">
                <i class="bi bi-search search-icon"></i>
                <input type="text" class="search-input" placeholder="Tìm theo tên, SĐT...">
            </div>

            <select class="filter-select">
                <option value="all">Tất cả tin nhắn</option>
                <option value="unread">Chưa đọc</option>
                <option value="important">Quan trọng</option>
                <option value="pending">Chờ xử lý</option>
            </select>
        </div>

        <div class="chat-list" id="chatList">
            <!-- Danh sách khách hàng sẽ load ở đây -->
        </div>
    </div>

    <!-- Main chat area -->
    <div class="chat-main">
        <div class="chat-header">
            <div class="d-flex align-items-center">
                <img src="/images/avatar-default.png" alt="Avatar" class="header-avatar" id="headerAvatar">
                <div class="ms-3">
                    <h6 class="mb-0" id="headerName">Chọn khách hàng để chat</h6>
                    <small class="text-muted" id="headerStatus">Online</small>
                </div>
            </div>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="text-center text-muted py-5">
                <i class="bi bi-chat-dots fs-1"></i>
                <p class="mt-2">Chọn khách hàng để bắt đầu trò chuyện</p>
            </div>
        </div>

        <div class="chat-input-area">
            <div class="file-preview-area" id="filePreviewArea"></div>

            <div class="chat-input-wrapper">
                <button class="btn btn-light btn-sm" type="button" id="btnEmoji" title="Emoji">
                    <i class="bi bi-emoji-smile"></i>
                </button>
                <button class="btn btn-light btn-sm" type="button" id="btnImage" title="Đính kèm ảnh">
                    <i class="bi bi-image"></i>
                </button>
                <button class="btn btn-light btn-sm" type="button" id="btnFile" title="Gửi file">
                    <i class="bi bi-paperclip"></i>
                </button>
                <input type="text" class="form-control message-input" id="messageInput" placeholder="Nhập tin nhắn...">
                <button class="btn btn-primary send-btn" id="sendBtn">
                    <i class="bi bi-send-fill"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<script src="~/js/chat_seller.js"></script>